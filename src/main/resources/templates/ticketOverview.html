<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="de">
<head th:insert="fragments :: html_head"></head>
<body>
<nav th:replace="fragments :: navbar"></nav>
<br>

<div class="container-fluid" id="load">

    <div class="card">

        <div class="card-header">
            <section class="text-center">
                <h1>Bitte warten...</h1>
            </section>
        </div>
        <div class="card-body text-center">
            <span class="spinner-border card-img" style="min-height: 200px; min-width: 200px;"></span>
        </div>


    </div>

</div>

<div class="container-fluid d-none" id="content">

    <div class="card">
        <h1 class="card-header text-center">Übersicht der Anträge</h1>

        <div class="card-body">

            <table id="table_id" class="display" style="min-width: 100%">
                <thead>
                <tr>
                    <th>SORTDATE_DEADLINE</th>
                    <th>Name, Vorname</th>
                    <th>Verband / Gruppe</th>
                    <th>Erstellt am</th>
                    <th>Deadline</th>
                    <th>Bearbeiter</th>
                    <th>Status</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="ticket:${tickets}">
                    <td th:text="${ticket.getDeadline()}"></td>
                    <td th:text="${ticket.getTicketPerson().getName()}"></td>
                    <td th:text="${ticket.getTicketPerson().getAssociation()}"></td>
                    <td th:text="${ticket.getDates().getGermanDate_CREATED()}"></td>
                    <td th:text="${ticket.getDates().getGermanDate_DEADLINE()}"></td>
                    <td th:text="${ticket.getEditor().getUsername()}">Nicht zugewießen</td>
                    <td class="d-grid"><button th:class="${ticket.getTicketState().getClassName()}" th:text="${ticket.getTicketState().getName()}"></button></td>
                    <td><a class="btn btn-primary" th:href="'/ticket/edit?uuid=' + ${ticket.getUUID()}"><span class="mdi mdi-book-arrow-right"></span> </a></td>
                </tr>


                </tbody>
            </table>

        </div>

    </div>

</div>

</body>


<script th:src="@{/script/imports/jquery.min.js}"></script>
<script th:src="@{/script/imports/jquery.dataTables.min.js}"></script>
<script>
    $(document).ready( function () {
        $('#table_id').DataTable({
            language: {
                "decimal": ",",
                "thousands": ".",
                "infoPostFix": "",
                "infoFiltered": "(gefiltert aus insgesamt _MAX_ Einträgen)",
                "loadingRecords": "Bitte warten Sie - Daten werden geladen ...",
                "lengthMenu": "Anzeigen von _MENU_ Einträgen",
                "paginate": {
                    "first": "Erste",
                    "last": "Letzte",
                    "next": "Nächste",
                    "previous": "Zurück"
                },
                "processing": "Verarbeitung läuft ...",
                "search": "Suche:",
                "searchPlaceholder": "Suchbegriff",
                "zeroRecords": "Keine Daten! Bitte ändern Sie Ihren Suchbegriff.",
                "emptyTable": "Keine Einträge zum Anzeigen vorhanden",
                "aria": {
                    "sortAscending": ": aktivieren, um Spalte aufsteigend zu sortieren",
                    "sortDescending": ": aktivieren, um Spalte absteigend zu sortieren"
                },
                "info": "Zeigt _START_ bis _END_  von _TOTAL_ Einträgen",
                "infoEmpty": "Keine Einträge zum Anzeigen vorhanden",
                "select": {
                    "rows": {
                        _: '%d Zeilen ausgewählt',
                        0: 'Zeile anklicken um auszuwählen',
                        1: 'Eine Zeile ausgewählt'
                    }
                }
            },
            "columnDefs": [

                {
                    "targets": [0],
                    "visible": false,
                    "searchable": false,

                },
                {
                    "targets": [7],
                    className: 'dt-body-right'
                }

            ]
        });

        setTimeout(function () {
            document.getElementById("content").classList.remove("d-none");
            document.getElementById("load").classList.add("d-none");
        }, 200);
    });
</script>

</html>
